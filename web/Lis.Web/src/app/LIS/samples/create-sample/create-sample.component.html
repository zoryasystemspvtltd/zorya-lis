<br>
<h3>Add Sample</h3>
<br>
<form [formGroup]="addSampleForm" (ngSubmit)="onSubmit()" *ngIf="isLoaded">
    <div class="form-group">
        <h4>Patient Information</h4>
        <hr />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Request No<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="hisRequestNo" class="form-control" formControlName="hisRequestNo"
                        placeholder="Enter Request No" maxlength="25" style="width:100%;" />
                </div>
                <span *ngIf="isInValid('hisRequestNo')" class="error ">Request No is required.</span>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> MRNO<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="mrNo" class="form-control" formControlName="mrNo"
                        placeholder="Enter MRNO" maxlength="25" style="width:100%;" />
                </div>
                <span *ngIf="isInValid('mrNo')" class="error ">MRNO is required.</span>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Patient Id<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="hisPatientId" class="form-control" formControlName="hisPatientId"
                        placeholder="Enter Patient Id" maxlength="20" style="width:100%;" />
                </div>
                <span *ngIf="isInValid('hisPatientId')" class="error ">Patient Id is required.</span>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Patient Name<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="patientName" class="form-control" formControlName="patientName"
                        placeholder="Enter Patient Name" maxlength="25" style="width:100%;" />
                </div>
                <span *ngIf="isInValid('patientName')" class="error ">Patient Name is required.</span>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Age<span class="error">*</span></label>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'number'" name="year" class="form-control" formControlName="year" placeholder="Year"
                        style="width:30%;" [min]="'0'" [max]="'150'" />
                    <input [type]="'number'" name="month" class="form-control" formControlName="month"
                        placeholder="Month" style="width:30%;" [min]="'0'" [max]="'11'" />
                </div>
                <span *ngIf="isInValid('year')" class="error ">Year is required.</span>
                <span *ngIf="isInValid('month')" class="error ">Month is required.</span>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Gender<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <select formControlName="gender" class="form-control input-group-sm input-sm">
                        <option value="">--Select Gender--</option>
                        <option Value="M">MALE</option>
                        <option Value="F">FEMALE</option>
                    </select>
                </div>
                <span *ngIf="isInValid('gender')" class="error ">Please select gender.</span>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> IPNO</label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="ipNo" class="form-control" formControlName="ipNo"
                        placeholder="Enter IPNO" maxlength="15" style="width:100%;" />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> BedNo</label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" name="bedNo" class="form-control" formControlName="bedNo"
                        placeholder="Enter BedNo" maxlength="15" style="width:100%;" />
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Sample Collection Date<span class="error">*</span></label>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'date'" name="sampleCollectionDate" class="form-control"
                        formControlName="sampleCollectionDate" placeholder="Enter Sample Collection Date" maxlength="25"
                        style="width:100%;" />
                </div>
                <span *ngIf="isInValid('sampleCollectionDate')" class="error ">Sample Collection Date is
                    required.</span>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"></div>
            <div class="col-sm-4 col-md-4 col-lg-4"></div>
        </div>
        <br />
        <h4>Test Information</h4>
        <div class="col-md-12 form-grid-stye" *ngFor="let test of selectedTest">
            <input [type]="'checkbox'" id="{{test.hisTestCode}}" (change)="deleteItem(test)" style="display: none;">
            <label for="{{test.hisTestCode}}" title="{{test.hisTestCodeDescription}}"> &nbsp; {{
                (test.hisTestCodeDescription.length>30)? (test.hisTestCodeDescription |
                slice:0:30)+'..':(test.hisTestCodeDescription) }}
                <span style="cursor: pointer;" class="glyphicon glyphicon-remove"></span>
            </label>


        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <alert></alert>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <div style="float:left;">
                    <button type="submit" class="btn btn-primary" *ngIf="hasAccess()">Save</button>
                </div>
                <div style="padding-left:6px; float:left;">
                    <a [routerLink]="['/','samples']" class="btn btn-default btn-default-alternet">Back to
                        List</a>
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-12">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                        placeholder="Search" (keyup)="doSearch($event);">
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-12">

                <div *ngFor="let item of departments">
                    <div *ngIf="hasMapping(hisTests,item.code)">
                        <div class="panel-heading panel-head-area">
                            <div class="panel-title ">
                                <a data-toggle="collapse"
                                    [ngClass]="!item.selected ? 'glyphicon-minus':'glyphicon-plus'"
                                    class="panel-link text-secondary font-weight-bold glyphicon"
                                    style="text-decoration: none;" (click)="selectPanel(item)"
                                    data-parent="#accordion_t" target="_self" href="#t_{{item.code}}">
                                    {{item.name}}
                                </a>
                            </div>
                        </div>
                        <div id="t_{{item.code}}" class="panel-collapse collapse in">
                            <div class="panel-body panel">
                                <div class="row">
                                    <div class="col-sm-12 col-md-4 col-lg-4 form-grid-stye"
                                        *ngFor="let test of filterMapping(hisTests,item.code)">
                                        <input [type]="'checkbox'" id="{{test.hisTestCode}}"
                                            (change)="onCheckActive($event,test)">
                                        <label for="{{test.hisTestCode}}" title="{{test.hisTestCodeDescription}}">&nbsp;
                                            {{test.hisTestCode}} : {{ (test.hisTestCodeDescription.length>30)?
                                            (test.hisTestCodeDescription |
                                            slice:0:30)+'..':(test.hisTestCodeDescription) }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <alert></alert>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <div style="float:left;">
                    <button type="submit" class="btn btn-primary" *ngIf="hasAccess()">Save</button>
                </div>
                <div style="padding-left:6px; float:left;">
                    <a [routerLink]="['/','samples']" class="btn btn-default btn-default-alternet">Back to
                        List</a>
                </div>
            </div>
        </div>

    </div>
</form>