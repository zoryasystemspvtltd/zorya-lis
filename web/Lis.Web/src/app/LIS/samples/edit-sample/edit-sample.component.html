<br>
<h3>Add Sample</h3>
<br>
<form [formGroup]="editSampleForm" (ngSubmit)="onSubmit()" *ngIf="isLoaded">
    <div class="form-group">
        <h4>Patient Information</h4>
        <hr />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Barcode No<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="sampleNo" style="width:100%;"
                        readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> LABNO<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="hisRequestNo" style="width:100%;"
                        readonly />
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Patient Id<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="hisPatientId" style="width:100%;"
                        readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Patient Name<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="patientName" style="width:100%;"
                        readonly />
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Age<span class="error">*</span></label>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="age" style="width:40%;" readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Gender<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <select formControlName="gender" class="form-control input-group-sm input-sm" readonly>
                        <option Value="M">MALE</option>
                        <option Value="F">FEMALE</option>
                    </select>
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> IPNO</label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="ipNo" style="width:100%;" readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> BedNo</label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="bedNo" style="width:100%;" readonly />
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2"><label> MRNO<span class="error">*</span></label></div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="mrNo" style="width:100%;" readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"><label> Sample Collection Date<span class="error">*</span></label>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-blackboard"></i></span>
                    <input [type]="'text'" class="form-control" formControlName="sampleCollectionDate"
                        style="width:100%;" readonly />
                </div>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2"></div>
            <div class="col-sm-4 col-md-4 col-lg-4"></div>
        </div>
        <br />
        <h4>Test Information</h4>
        <div class="col-md-12 form-grid-stye" *ngFor="let test of selectedTest">
            <input [type]="'checkbox'" id="{{test.hisTestCode}}" (change)="deleteItem(test)" style="display: none;">
            <label for="{{test.hisTestCode}}" title="{{test.hisTestCodeDescription}}"> &nbsp; {{
                (test.hisTestCodeDescription.length>30)? (test.hisTestCodeDescription |
                slice:0:30)+'..':(test.hisTestCodeDescription) }}
                <span style="cursor: pointer;" class="glyphicon glyphicon-remove"></span>
            </label>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <alert></alert>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <div style="float:left;">
                    <button type="submit" class="btn btn-primary" *ngIf="hasAccess()">Save</button>
                </div>
                <div style="padding-left:6px; float:left;">
                    <a [routerLink]="['/','samples']" class="btn btn-default btn-default-alternet">Back to
                        List</a>
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-12">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty"
                        placeholder="Search" (keyup)="doSearch($event);">
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-12">

                <div *ngFor="let item of departments">
                    <div *ngIf="hasMapping(hisTests,item.code)">
                        <div class="panel-heading panel-head-area">
                            <div class="panel-title ">
                                <a data-toggle="collapse"
                                    [ngClass]="!item.selected ? 'glyphicon-minus':'glyphicon-plus'"
                                    class="panel-link text-secondary font-weight-bold glyphicon"
                                    style="text-decoration: none;" (click)="selectPanel(item)"
                                    data-parent="#accordion_t" target="_self" href="#t_{{item.code}}">
                                    {{item.name}}
                                </a>
                            </div>
                        </div>
                        <div id="t_{{item.code}}" class="panel-collapse collapse in">
                            <div class="panel-body panel">
                                <div class="row">
                                    <div class="col-sm-12 col-md-4 col-lg-4 form-grid-stye"
                                        *ngFor="let test of filterMapping(hisTests,item.code)">
                                        <input [type]="'checkbox'" id="{{test.hisTestCode}}"
                                            (change)="onCheckActive($event,test)">
                                        <label for="{{test.hisTestCode}}" title="{{test.hisTestCodeDescription}}">&nbsp;
                                            {{test.hisTestCode}} : {{ (test.hisTestCodeDescription.length>30)?
                                            (test.hisTestCodeDescription |
                                            slice:0:30)+'..':(test.hisTestCodeDescription) }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <alert></alert>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <div style="float:left;">
                    <button type="submit" class="btn btn-primary" *ngIf="hasAccess()">Save</button>
                </div>
                <div style="padding-left:6px; float:left;">
                    <a [routerLink]="['/','samples']" class="btn btn-default btn-default-alternet">Back to
                        List</a>
                </div>
            </div>
        </div>
    </div>
</form>